(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-87a5dd88"],{"80b9":function(t,s,e){"use strict";e("c744")},c744:function(t,s,e){},d56b:function(t,s,e){"use strict";var a=e("f1be"),r=e("7269"),i=e("ffe6"),o=e("ad81"),n=e("6f3a"),l=e("70a9"),c=e("7e16"),u=e("0c07"),d=e("1c1b"),m=e("4002"),v=e("6b76"),p=!v&&!d("map",(function(){})),h=!v&&!p&&m("map",TypeError),g=v||p||h,f=l((function(){var t=this.iterator,s=o(r(this.next,t)),e=this.done=!!s.done;if(!e)return c(t,this.mapper,[s.value,this.counter++],!0)}));a({target:"Iterator",proto:!0,real:!0,forced:g},{map:function(t){o(this);try{i(t)}catch(s){u(this,"throw",s)}return h?r(h,this,t):new f(n(this),{mapper:t})}})},dbaa:function(t,s,e){"use strict";e.r(s);e("c9ea"),e("d56b");var a=function(){var t=this,s=t._self._c;return s("div",{staticClass:"suno-music-container"},[s("h2",{staticClass:"suno-title"},[t._v("ğŸµ AIéŸ³ä¹ç”Ÿæˆ")]),t.taskId?t.generatedMusic.length?s("div",{staticClass:"result-section"},[s("h3",{staticClass:"result-title"},[t._v("ğŸ‰ éŸ³ä¹ç”Ÿæˆå®Œæˆï¼")]),s("p",{staticClass:"task-info"},[t._v("ä»»åŠ¡IDï¼š"+t._s(t.taskId))]),s("div",{staticClass:"music-list"},t._l(t.generatedMusic,(function(e){return s("div",{key:e.id,staticClass:"music-item"},[s("div",{staticClass:"music-header"},[s("h4",{staticClass:"music-title"},[t._v(t._s(e.title||"æœªå‘½åéŸ³ä¹"))]),s("span",{staticClass:"music-model"},[t._v(t._s(e.model_name))])]),s("div",{staticClass:"music-cover"},[s("img",{attrs:{src:e.image_url||"https://via.placeholder.com/300x300?text=No+Cover",alt:e.title||"éŸ³ä¹å°é¢",onerror:"this.src='https://via.placeholder.com/300x300?text=No+Cover'"}})]),s("div",{staticClass:"music-audio"},[s("audio",{attrs:{src:e.audio_url,controls:"",title:e.title||"ç”Ÿæˆçš„éŸ³ä¹"}},[t._v(" æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ ")])]),s("div",{staticClass:"music-info"},[s("p",{staticClass:"music-prompt"},[s("strong",[t._v("æè¿°ï¼š")]),t._v(t._s(e.prompt))]),e.tags?s("p",{staticClass:"music-tags"},[s("strong",[t._v("æ ‡ç­¾ï¼š")]),t._v(t._s(e.tags))]):t._e(),s("p",{staticClass:"music-duration"},[s("strong",[t._v("æ—¶é•¿ï¼š")]),t._v(t._s(t.formatDuration(e.duration)))]),s("p",{staticClass:"music-time"},[s("strong",[t._v("ç”Ÿæˆæ—¶é—´ï¼š")]),t._v(t._s(new Date(e.createTime).toLocaleString()))])]),s("div",{staticClass:"music-actions"},[s("a",{staticClass:"action-btn download-btn",attrs:{href:e.audio_url,target:"_blank",rel:"noopener noreferrer",download:""}},[t._v(" ğŸ’¾ ä¸‹è½½ ")]),s("a",{staticClass:"action-btn source-btn",attrs:{href:e.audio_url,target:"_blank",rel:"noopener noreferrer"}},[t._v(" ğŸ“¥ åŸå§‹æ–‡ä»¶ ")])])])})),0),s("div",{staticClass:"result-actions"},[s("button",{staticClass:"generate-again-btn",on:{click:t.resetForm}},[t._v(" ç”Ÿæˆå¦ä¸€é¦–éŸ³ä¹ ")])])]):s("div",{staticClass:"generating-section"},[s("div",{staticClass:"generating-content"},[s("div",{staticClass:"loading-spinner"}),s("h3",[t._v("éŸ³ä¹ç”Ÿæˆä¸­...")]),s("p",[t._v("ä»»åŠ¡IDï¼š"+t._s(t.taskId))]),s("p",{staticClass:"generating-tip"},[t._v("éŸ³ä¹ç”Ÿæˆå¯èƒ½éœ€è¦å‡ åˆ†é’Ÿæ—¶é—´ï¼Œè¯·è€å¿ƒç­‰å¾…")]),s("div",{staticClass:"generating-actions"},[s("button",{staticClass:"check-btn",attrs:{disabled:t.checking},on:{click:t.checkStatus}},[t.checking?s("span",[t._v("æŸ¥è¯¢ä¸­...")]):s("span",[t._v("æ‰‹åŠ¨æŸ¥è¯¢çŠ¶æ€")])]),s("button",{staticClass:"cancel-btn",on:{click:t.resetForm}},[t._v("å–æ¶ˆ")])])])]):s("div",{staticClass:"suno-form"},[s("div",{staticClass:"form-group"},[t._m(0),s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.form.prompt,expression:"form.prompt"}],attrs:{id:"prompt",placeholder:"è¯·æè¿°ä½ æƒ³è¦ç”Ÿæˆçš„éŸ³ä¹ï¼Œä¾‹å¦‚ï¼šä¸€é¦–è½»æ¾æ„‰å¿«çš„æµè¡Œæ­Œæ›²ï¼Œé€‚åˆåœ¨å’–å•¡é¦†æ’­æ”¾",rows:"3",required:""},domProps:{value:t.form.prompt},on:{input:function(s){s.target.composing||t.$set(t.form,"prompt",s.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"model"}},[t._v("æ¨¡å‹ç‰ˆæœ¬")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.model,expression:"form.model"}],attrs:{id:"model"},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.$set(t.form,"model",s.target.multiple?e:e[0])}}},[s("option",{attrs:{value:"V4"}},[t._v("V4 æ”¹è¿›çš„äººå£°è´¨é‡")]),s("option",{attrs:{value:"V4_5"}},[t._v("V4_5 æ›´æ™ºèƒ½çš„æç¤ºè¯ï¼Œæ›´å¿«çš„ç”Ÿæˆé€Ÿåº¦")]),s("option",{attrs:{value:"V4_5PLUS"}},[t._v("V4_5PLUS éŸ³è‰²æ›´ä¸°å¯Œï¼Œæ–°çš„åˆ›ä½œæ–¹å¼")]),s("option",{attrs:{value:"V4_5ALL",selected:""}},[t._v("V4_5ALL æ›´å¥½çš„æ­Œæ›²ç»“æ„")]),s("option",{attrs:{value:"V5"}},[t._v("V5 æ›´å“è¶Šçš„éŸ³ä¹è¡¨ç°åŠ›ï¼Œç”Ÿæˆé€Ÿåº¦æ›´å¿«")])])]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"checkbox-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.customMode,expression:"form.customMode"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.form.customMode)?t._i(t.form.customMode,null)>-1:t.form.customMode},on:{change:function(s){var e=t.form.customMode,a=s.target,r=!!a.checked;if(Array.isArray(e)){var i=null,o=t._i(e,i);a.checked?o<0&&t.$set(t.form,"customMode",e.concat([i])):o>-1&&t.$set(t.form,"customMode",e.slice(0,o).concat(e.slice(o+1)))}else t.$set(t.form,"customMode",r)}}}),s("span",[t._v("ä½¿ç”¨è‡ªå®šä¹‰æ¨¡å¼")])])]),t.form.customMode?s("div",{staticClass:"custom-mode-section"},[s("h3",[t._v("è‡ªå®šä¹‰å‚æ•°")]),s("div",{staticClass:"form-group"},[t._m(1),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.style,expression:"form.style"}],attrs:{id:"style",placeholder:"ä¾‹å¦‚ï¼šæµè¡Œã€æ‘‡æ»šã€å¤å…¸ã€ç”µå­",required:""},domProps:{value:t.form.style},on:{input:function(s){s.target.composing||t.$set(t.form,"style",s.target.value)}}})]),s("div",{staticClass:"form-group"},[t._m(2),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.title,expression:"form.title"}],attrs:{id:"title",placeholder:"ç»™ä½ çš„éŸ³ä¹èµ·ä¸ªåå­—",required:""},domProps:{value:t.form.title},on:{input:function(s){s.target.composing||t.$set(t.form,"title",s.target.value)}}})]),s("div",{staticClass:"form-group"},[s("label",{staticClass:"checkbox-label"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.instrumental,expression:"form.instrumental"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.form.instrumental)?t._i(t.form.instrumental,null)>-1:t.form.instrumental},on:{change:function(s){var e=t.form.instrumental,a=s.target,r=!!a.checked;if(Array.isArray(e)){var i=null,o=t._i(e,i);a.checked?o<0&&t.$set(t.form,"instrumental",e.concat([i])):o>-1&&t.$set(t.form,"instrumental",e.slice(0,o).concat(e.slice(o+1)))}else t.$set(t.form,"instrumental",r)}}}),s("span",[t._v("çº¯éŸ³ä¹ï¼ˆæ—  vocalsï¼‰")])])]),t.form.instrumental?t._e():s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"vocalGender"}},[t._v(" vocalsæ€§åˆ«")]),s("select",{directives:[{name:"model",rawName:"v-model",value:t.form.vocalGender,expression:"form.vocalGender"}],attrs:{id:"vocalGender"},on:{change:function(s){var e=Array.prototype.filter.call(s.target.options,(function(t){return t.selected})).map((function(t){var s="_value"in t?t._value:t.value;return s}));t.$set(t.form,"vocalGender",s.target.multiple?e:e[0])}}},[s("option",{attrs:{value:"m"}},[t._v("ç”·")]),s("option",{attrs:{value:"f"}},[t._v("å¥³")])])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"negativeTags"}},[t._v("è´Ÿé¢æ ‡ç­¾")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.negativeTags,expression:"form.negativeTags"}],attrs:{id:"negativeTags",placeholder:"ä¾‹å¦‚ï¼šå˜ˆæ‚, åˆºè€³, æ‚²ä¼¤ï¼ˆç”¨é€—å·åˆ†éš”ï¼‰"},domProps:{value:t.form.negativeTags},on:{input:function(s){s.target.composing||t.$set(t.form,"negativeTags",s.target.value)}}})]),s("div",{staticClass:"form-row"},[s("div",{staticClass:"form-group form-half"},[s("label",{attrs:{for:"styleWeight"}},[t._v("é£æ ¼æƒé‡ (0-1)")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.styleWeight,expression:"form.styleWeight",modifiers:{number:!0}}],attrs:{id:"styleWeight",type:"number",min:"0",max:"1",step:"0.01"},domProps:{value:t.form.styleWeight},on:{input:function(s){s.target.composing||t.$set(t.form,"styleWeight",t._n(s.target.value))},blur:function(s){return t.$forceUpdate()}}})]),s("div",{staticClass:"form-group form-half"},[s("label",{attrs:{for:"weirdnessConstraint"}},[t._v("æ€ªå¼‚åº¦ (0-1)")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.weirdnessConstraint,expression:"form.weirdnessConstraint",modifiers:{number:!0}}],attrs:{id:"weirdnessConstraint",type:"number",min:"0",max:"1",step:"0.01"},domProps:{value:t.form.weirdnessConstraint},on:{input:function(s){s.target.composing||t.$set(t.form,"weirdnessConstraint",t._n(s.target.value))},blur:function(s){return t.$forceUpdate()}}})])]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"audioWeight"}},[t._v("éŸ³é¢‘æƒé‡ (0-1)")]),s("input",{directives:[{name:"model",rawName:"v-model.number",value:t.form.audioWeight,expression:"form.audioWeight",modifiers:{number:!0}}],attrs:{id:"audioWeight",type:"number",min:"0",max:"1",step:"0.01"},domProps:{value:t.form.audioWeight},on:{input:function(s){s.target.composing||t.$set(t.form,"audioWeight",t._n(s.target.value))},blur:function(s){return t.$forceUpdate()}}})]),s("div",{staticClass:"form-group"},[s("label",{attrs:{for:"personaId"}},[t._v("è§’è‰²ID")]),s("input",{directives:[{name:"model",rawName:"v-model",value:t.form.personaId,expression:"form.personaId"}],attrs:{id:"personaId",placeholder:"ä¾‹å¦‚ï¼špersona_123ï¼ˆå¯é€‰ï¼‰"},domProps:{value:t.form.personaId},on:{input:function(s){s.target.composing||t.$set(t.form,"personaId",s.target.value)}}})])]):t._e(),s("button",{staticClass:"generate-btn",attrs:{disabled:t.loading},on:{click:t.generateMusic}},[t.loading?s("span",[t._v("ç”Ÿæˆä¸­...")]):s("span",[t._v("ç”ŸæˆéŸ³ä¹")])])]),s("div",{staticClass:"history-section"},[s("h3",{staticClass:"history-title"},[t._v("ğŸ“œ å†å²è®°å½•")]),s("div",{staticClass:"history-form"},[s("div",{staticClass:"history-search"},[s("input",{directives:[{name:"model",rawName:"v-model",value:t.historyQuery.taskId,expression:"historyQuery.taskId"}],staticClass:"history-input",attrs:{type:"text",placeholder:"è¾“å…¥ä»»åŠ¡IDæŸ¥è¯¢ç‰¹å®šè®°å½•"},domProps:{value:t.historyQuery.taskId},on:{input:function(s){s.target.composing||t.$set(t.historyQuery,"taskId",s.target.value)}}}),s("div",{staticClass:"history-buttons"},[s("button",{staticClass:"query-btn",attrs:{disabled:t.querying},on:{click:t.queryHistory}},[t.querying?s("span",[t._v("æŸ¥è¯¢ä¸­...")]):s("span",[t._v("æŸ¥è¯¢è®°å½•")])]),s("button",{staticClass:"query-all-btn",attrs:{disabled:t.querying},on:{click:t.queryAllHistory}},[t.querying?s("span",[t._v("æŸ¥è¯¢ä¸­...")]):s("span",[t._v("æŸ¥è¯¢å…¨éƒ¨")])]),s("button",{staticClass:"reset-btn",on:{click:t.resetHistory}},[t._v("é‡ç½®")])])])]),t.historyRecords.length>0?s("div",{staticClass:"history-list"},t._l(t.historyRecords,(function(e){return s("div",{key:e.taskId,staticClass:"history-item",on:{click:function(s){return t.showHistoryMusic(e.taskId)}}},[s("div",{staticClass:"history-item-header"},[s("div",{staticClass:"history-task-id"},[s("strong",[t._v("ä»»åŠ¡IDï¼š")]),t._v(t._s(e.taskId)+" ")]),s("div",{staticClass:"history-status",class:"status-"+e.status.toLowerCase()},[t._v(" "+t._s(e.status)+" ")])]),s("div",{staticClass:"history-item-body"},[s("div",{staticClass:"history-time"},[t._v(t._s(new Date(e.createTime).toLocaleString()))]),s("div",{staticClass:"history-prompt"},[t._v(t._s(e.prompt))])])])})),0):t.querying?t._e():s("div",{staticClass:"history-empty"},[s("p",[t._v(t._s(t.historyQuery.taskId?"æœªæ‰¾åˆ°è¯¥ä»»åŠ¡IDçš„è®°å½•":"æš‚æ— å†å²è®°å½•"))])]),t.showingHistoryMusic&&t.historyDetail.length>0?s("div",{staticClass:"history-detail"},[s("h4",{staticClass:"detail-title"},[t._v("å†å²è®°å½•è¯¦æƒ…")]),s("div",{staticClass:"music-list"},t._l(t.historyDetail,(function(e){return s("div",{key:e.id,staticClass:"music-item"},[s("div",{staticClass:"music-header"},[s("h4",{staticClass:"music-title"},[t._v(t._s(e.title||"æœªå‘½åéŸ³ä¹"))]),s("span",{staticClass:"music-model"},[t._v(t._s(e.model_name))])]),s("div",{staticClass:"music-cover"},[s("img",{attrs:{src:e.image_url||"https://via.placeholder.com/300x300?text=No+Cover",alt:e.title||"éŸ³ä¹å°é¢",onerror:"this.src='https://via.placeholder.com/300x300?text=No+Cover'"}})]),s("div",{staticClass:"music-audio"},[s("audio",{attrs:{src:e.audio_url,controls:"",title:e.title||"ç”Ÿæˆçš„éŸ³ä¹"}},[t._v(" æ‚¨çš„æµè§ˆå™¨ä¸æ”¯æŒéŸ³é¢‘æ’­æ”¾ ")])]),s("div",{staticClass:"music-info"},[s("p",{staticClass:"music-prompt"},[s("strong",[t._v("æè¿°ï¼š")]),t._v(t._s(e.prompt))]),e.tags?s("p",{staticClass:"music-tags"},[s("strong",[t._v("æ ‡ç­¾ï¼š")]),t._v(t._s(e.tags))]):t._e(),s("p",{staticClass:"music-duration"},[s("strong",[t._v("æ—¶é•¿ï¼š")]),t._v(t._s(t.formatDuration(e.duration)))]),s("p",{staticClass:"music-time"},[s("strong",[t._v("ç”Ÿæˆæ—¶é—´ï¼š")]),t._v(t._s(new Date(e.createTime).toLocaleString()))])]),s("div",{staticClass:"music-actions"},[s("a",{staticClass:"action-btn download-btn",attrs:{href:e.audio_url,target:"_blank",rel:"noopener noreferrer",download:""}},[t._v(" ğŸ’¾ ä¸‹è½½ ")]),s("a",{staticClass:"action-btn source-btn",attrs:{href:e.audio_url,target:"_blank",rel:"noopener noreferrer"}},[t._v(" ğŸ“¥ åŸå§‹æ–‡ä»¶ ")])])])})),0)]):t._e()]),t.error?s("div",{staticClass:"error-message"},[s("p",[t._v(t._s(t.error))]),s("button",{staticClass:"close-error",on:{click:function(s){t.error=""}}},[t._v("Ã—")])]):t._e()])},r=[function(){var t=this,s=t._self._c;return s("label",{attrs:{for:"prompt"}},[t._v("éŸ³ä¹æè¿° "),s("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,s=t._self._c;return s("label",{attrs:{for:"style"}},[t._v("éŸ³ä¹é£æ ¼ "),s("span",{staticClass:"required"},[t._v("*")])])},function(){var t=this,s=t._self._c;return s("label",{attrs:{for:"title"}},[t._v("éŸ³ä¹æ ‡é¢˜ "),s("span",{staticClass:"required"},[t._v("*")])])}],i=(e("ed15"),e("d3a1"),e("66f9"),e("1bab")),o={name:"SunoMusic",data(){return{form:{prompt:"",callBackUrl:"https://47.120.34.167:3000/suno_callback",customMode:!1,instrumental:!1,style:"",title:"",model:"V5",negativeTags:"",vocalGender:"m",styleWeight:.65,weirdnessConstraint:.65,audioWeight:.65,personaId:""},loading:!1,checking:!1,querying:!1,error:"",taskId:"",generatedMusic:[],pollingInterval:null,historyQuery:{taskId:""},historyRecords:[],historyDetail:[],showingHistoryMusic:!1}},created(){this.restoreStateFromStorage()},updated(){this.saveStateToStorage()},watch:{taskId(t){t?this.startPolling():this.stopPolling()}},beforeDestroy(){this.stopPolling(),this.saveStateToStorage()},methods:{saveStateToStorage(){try{const t={form:this.form,taskId:this.taskId,generatedMusic:this.generatedMusic};localStorage.setItem("sunoMusicState",JSON.stringify(t))}catch(t){console.error("ä¿å­˜çŠ¶æ€å¤±è´¥ï¼š",t)}},restoreStateFromStorage(){try{const t=localStorage.getItem("sunoMusicState");if(t){const s=JSON.parse(t);s.form&&(this.form={...s.form}),s.taskId&&(this.taskId=s.taskId),Array.isArray(s.generatedMusic)&&(this.generatedMusic=[...s.generatedMusic])}}catch(t){console.error("æ¢å¤çŠ¶æ€å¤±è´¥ï¼š",t)}},async generateMusic(){try{if(this.loading=!0,this.error="",!this.form.prompt)return this.error="è¯·å¡«å†™å¿…å¡«å­—æ®µ",void(this.loading=!1);if(this.form.customMode&&(!this.form.style||!this.form.title))return this.error="è‡ªå®šä¹‰æ¨¡å¼æ—¶ï¼ŒéŸ³ä¹é£æ ¼å’Œæ ‡é¢˜ä¸ºå¿…å¡«å­—æ®µ",void(this.loading=!1);const s=await Object(i["a"])({url:"/sunoapi",method:"post",data:this.form});var t;if(200===s.data.code)this.taskId=null===(t=s.data.data)||void 0===t?void 0:t.taskId,alert("éŸ³ä¹ç”Ÿæˆè¯·æ±‚å·²æäº¤ï¼Œä»»åŠ¡IDï¼š"+this.taskId);else this.error=s.data.msg||"éŸ³ä¹ç”Ÿæˆè¯·æ±‚å¤±è´¥"}catch(s){console.error("ç”ŸæˆéŸ³ä¹å¤±è´¥ï¼š",s),this.error="ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"}finally{this.loading=!1}},async checkStatus(){if(this.taskId&&!this.checking)try{this.checking=!0;const t=await Object(i["a"])({url:"/sunoapi",method:"get",params:{action:"get",taskId:this.taskId}});if(200===t.data.code&&t.data.data){const s=t.data.data;s.status&&"SUCCESS"===s.status?s.response&&s.response.sunoData&&Array.isArray(s.response.sunoData)?(this.generatedMusic=s.response.sunoData.map(t=>({id:t.id||t.audioId,audio_url:t.audioUrl||t.audio_url||"",image_url:t.imageUrl||t.image_url||"",title:t.title||"æœªå‘½åéŸ³ä¹",model_name:t.modelName||t.model_name||"",duration:t.duration||0,prompt:t.prompt||"",tags:t.tags||"",createTime:(new Date).getTime()})).filter(t=>t.audio_url),this.generatedMusic.length>0?(this.stopPolling(),alert("éŸ³ä¹ç”Ÿæˆå®Œæˆï¼")):console.log("éŸ³ä¹çŠ¶æ€æ˜¾ç¤ºæˆåŠŸï¼Œä½†æ²¡æœ‰éŸ³é¢‘URLï¼Œç»§ç»­è½®è¯¢")):console.log("æ²¡æœ‰æ‰¾åˆ°ç”Ÿæˆçš„éŸ³ä¹æ•°æ®ï¼Œç»§ç»­è½®è¯¢"):"FAILED"===s.status||"GENERATE_AUDIO_FAILED"===s.status?(this.stopPolling(),this.error="éŸ³ä¹ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•",alert("éŸ³ä¹ç”Ÿæˆå¤±è´¥ï¼Œè¯·é‡è¯•")):console.log("éŸ³ä¹æ­£åœ¨ç”Ÿæˆä¸­ï¼Œå½“å‰çŠ¶æ€ï¼š",s.status)}else console.log("ä»»åŠ¡è¿˜åœ¨å¤„ç†ä¸­ï¼Œç»§ç»­è½®è¯¢")}catch(t){console.error("æŸ¥è¯¢çŠ¶æ€å¤±è´¥ï¼š",t),this.error="æŸ¥è¯¢çŠ¶æ€å¤±è´¥ï¼Œè¯·ç¨åé‡è¯•"}finally{this.checking=!1}},startPolling(){this.pollingInterval=setInterval(()=>{this.checkStatus()},5e3)},stopPolling(){this.pollingInterval&&(clearInterval(this.pollingInterval),this.pollingInterval=null)},resetForm(){this.form={prompt:"",callBackUrl:"",customMode:!1,instrumental:!1,style:"",title:"",model:"V5",negativeTags:"",vocalGender:"m",styleWeight:.65,weirdnessConstraint:.65,audioWeight:.65,personaId:""},this.taskId="",this.generatedMusic=[],this.error="",this.loading=!1,this.checking=!1},formatDuration(t){if(!t)return"0:00";const s=Math.floor(t/60),e=Math.floor(t%60);return`${s}:${e.toString().padStart(2,"0")}`},async queryHistory(){if(this.historyQuery.taskId)try{this.querying=!0,this.error="";const t=await Object(i["a"])({url:"/sunoapi",method:"get",params:{action:"history"}});200===t.data.code&&t.data.data?this.historyRecords=t.data.data.filter(t=>t.taskId===this.historyQuery.taskId):this.error=t.data.msg||"æŸ¥è¯¢å†å²è®°å½•å¤±è´¥"}catch(t){console.error("æŸ¥è¯¢å†å²è®°å½•å¤±è´¥ï¼š",t),this.error="ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"}finally{this.querying=!1}else this.error="è¯·è¾“å…¥ä»»åŠ¡ID"},async queryAllHistory(){try{this.querying=!0,this.error="";const t=await Object(i["a"])({url:"/sunoapi",method:"get",params:{action:"history"}});200===t.data.code&&t.data.data?this.historyRecords=t.data.data:this.error=t.data.msg||"æŸ¥è¯¢å…¨éƒ¨å†å²è®°å½•å¤±è´¥"}catch(t){console.error("æŸ¥è¯¢å…¨éƒ¨å†å²è®°å½•å¤±è´¥ï¼š",t),this.error="ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"}finally{this.querying=!1}},async showHistoryMusic(t){try{this.querying=!0,this.error="",this.showingHistoryMusic=!1;const s=await Object(i["a"])({url:"/sunoapi",method:"get",params:{action:"get",taskId:t}});if(200===s.data.code&&s.data.data){const t=s.data.data;t.status&&"SUCCESS"===t.status?t.response&&t.response.sunoData&&Array.isArray(t.response.sunoData)&&(this.historyDetail=t.response.sunoData.map(t=>({id:t.id||t.audioId,audio_url:t.audioUrl||t.audio_url||"",image_url:t.imageUrl||t.image_url||"",title:t.title||"æœªå‘½åéŸ³ä¹",model_name:t.modelName||t.model_name||"",duration:t.duration||0,prompt:t.prompt||"",tags:t.tags||"",createTime:t.createTime||(new Date).getTime()})).filter(t=>t.audio_url),this.showingHistoryMusic=!0):this.error="è¯¥è®°å½•çš„éŸ³ä¹ç”ŸæˆæœªæˆåŠŸæˆ–æ­£åœ¨ç”Ÿæˆä¸­"}else this.error=s.data.msg||"æŸ¥è¯¢å†å²éŸ³ä¹è¯¦æƒ…å¤±è´¥"}catch(s){console.error("æŸ¥è¯¢å†å²éŸ³ä¹è¯¦æƒ…å¤±è´¥ï¼š",s),this.error="ç½‘ç»œé”™è¯¯ï¼Œè¯·ç¨åé‡è¯•"}finally{this.querying=!1}},resetHistory(){this.historyQuery.taskId="",this.historyRecords=[],this.historyDetail=[],this.showingHistoryMusic=!1}}},n=o,l=(e("80b9"),e("1805")),c=Object(l["a"])(n,a,r,!1,null,"29560650",null);s["default"]=c.exports}}]);
//# sourceMappingURL=chunk-87a5dd88.d4f0cc12.js.map