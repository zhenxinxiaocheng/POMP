(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-765efae1"],{"665a":function(t,s,e){"use strict";e.r(s);var i=function(){var t=this,s=t._self._c;return s("div",{class:t.detailClass},[s("base-info",{attrs:{"base-info":t.baseInfo},on:{playMusic:t.playMusic}}),s("b-menu",{attrs:{menu:t.list,"active-color":t.getActiveColor},on:{click:t.handleMenuClick}}),s("div",{class:t.program+"detail-container"},[s("song-list",{directives:[{name:"show",rawName:"v-show",value:"music"==t.isShow,expression:"isShow == 'music'"}],ref:"songList",attrs:{"music-list":t.musicList,length:t.length}}),s("div",{directives:[{name:"show",rawName:"v-show",value:"recommend"==t.isShow,expression:"isShow == 'recommend'"}],staticClass:"detail-container-recommend"},[s("recommends",{ref:"recommend",attrs:{recommends:t.recommends,id:t.id}}),s("div",{staticClass:"recommend-bottom"},[s("el-pagination",{attrs:{background:"","current-page":t.offset,"page-size":t.limit,"page-count":50},on:{"update:currentPage":function(s){t.offset=s},"update:current-page":function(s){t.offset=s},"update:pageSize":function(s){t.limit=s},"update:page-size":function(s){t.limit=s},"current-change":t.onPageChange}})],1)],1),s("music-list-live",{directives:[{name:"show",rawName:"v-show",value:"sub"==t.isShow,expression:"isShow == 'sub'"}],attrs:{subs:t.subs}})],1)],1)},a=[],n=(e("becb"),e("6a93")),o=e("3ce8"),c=e("8b7f"),l=function(){var t=this,s=t._self._c;return Object.keys(t.baseInfo).length?s("div",{staticClass:"base-info"},[s("div",{staticClass:"left"},[s("img",{directives:[{name:"lazy",rawName:"v-lazy",value:t.baseInfo.img,expression:"baseInfo.img"}],attrs:{alt:""}})]),s("div",{staticClass:"right"},[s("h3",[s("b-tag",{attrs:{color:"var(--main-color)",plain:""}},[t._v("歌单")]),t._v(" "+t._s(t.baseInfo.name)+" ")],1),s("div",{staticClass:"right-item"},[s("b-avatar",{attrs:{src:t.baseInfo.creatorAvatar,size:"30px"}}),s("span",{staticClass:"creator-name"},[t._v(t._s(t.baseInfo.creatorName))]),s("span",[t._v("创建时间："+t._s(t.getCreateDate))])],1),s("div",{staticClass:"right-item"},[s("b-button",{staticClass:"button",style:{border:"none"},attrs:{background:"var(--main-color)",color:"#fff",round:""},on:{click:t.handlePlayMusic}},[s("i",{staticClass:"iconfont icon-bofang"}),t._v("播放全部 ")]),s("b-button",{staticClass:"button",attrs:{round:""}},[s("i",{staticClass:"iconfont icon-shoucang"}),t._v(" 收藏("+t._s(t.baseInfo.subscribedCount)+") ")]),s("b-button",{staticClass:"button",attrs:{round:""}},[s("i",{staticClass:"iconfont icon-fenxiang"}),t._v(" 分享("+t._s(t.baseInfo.shareCount)+") ")])],1),s("div",{staticClass:"desc"},[s("p",[t._v(" 标签： "),s("span",[t._v(t._s(t.getTags))])]),s("p",{staticClass:"desc-title"},[t._v("简介："+t._s(t.baseInfo.title)+"}}")])])]),s("div",{staticClass:"play"},[s("div",{staticClass:"play-left"},[t._v(" 歌曲数 "),s("br"),t._v(" "+t._s(t.baseInfo.trackCount)+" ")]),s("div",{staticClass:"play-right"},[t._v(" 播放数 "),s("br"),t._v(" "+t._s(t.getPlayCount)+" ")])])]):t._e()},r=[],u=e("3de1"),d={name:"BaseInfo",props:{baseInfo:{type:Object,default:{}}},computed:{getCreateDate(){return Object(u["a"])(new Date(this.baseInfo.createTime),"yyyy-MM-dd")},getTags(){return this.baseInfo.tags&&this.baseInfo.tags.join("/")},getPlayCount(){return this.baseInfo.playCount&&this.baseInfo.playCount.toString().slice(0,2)+"万"}},methods:{handlePlayMusic(){this.$emit("playMusic")}}},m=d,h=(e("835c"),e("1805")),f=Object(h["a"])(m,l,r,!1,null,"bd0e3784",null),b=f.exports,g=e("d8db"),v=e("b99c"),p=function(){var t=this,s=t._self._c;return null!=t.subs?s("div",{staticClass:"live"},[s("div",{staticClass:"content"},t._l(t.subs,(function(e,i){return s("div",{key:i,staticClass:"item"},[s("img",{attrs:{src:e.avatarUrl,alt:""},on:{load:t.handleImgLoad}}),s("div",{staticClass:"nickname"},[t._v(t._s(e.nickname))])])})),0)]):t._e()},C=[],_=e("ca40"),w={name:"MusicListLive",mixins:[_["a"]],props:{subs:{type:Array,default(){return[]}}},methods:{handleImgLoad(){this.imgCount==this.subs.length&&this.$emit("refresh"),this.imgCount++}}},y=w,I=(e("f850"),Object(h["a"])(y,p,C,!1,null,"3d645552",null)),k=I.exports,S={name:"MusicListDetail",mixins:[o["a"],c["a"]],components:{BaseInfo:b,SongList:g["a"],Recommends:v["a"],MusicListLive:k},computed:{detailClass(){return[""+(this.program+"detail"),""+(this.program+"detail-"+this.theme)]}},data(){return{id:null,limit:30,offset:1,list:[],baseInfo:{},musicList:[],isShow:"music",recommends:null,recommendsCount:0,subs:null,length:null}},created(){this.getDetailRequestDate()},methods:{onPageChange(){this.getRecommends(),this.$nextTick(()=>{let t=this.$refs.recommend.$el.offsetTop;this.$refs.scroll.scrollTo(t,0),this.handleRefresh()})},handleMenuClick(t){switch(t){case 0:this.isShow="music";break;case 1:this.isShow="recommend";break;case 2:this.isShow="sub"}},init(){this.limit=20,this.list=[],this.baseInfo={},this.musicList=[],this.isShow="music",this.recommends=null,this.subs=null},async getDetailRequestDate(){if(this.id=this.$route.params.id,!this.id)return;this.init();const t=await Object(n["b"])(this.id);this.baseInfo=new n["i"](t.data&&t.data.playlist),this.recommendsCount=t.data.playlist.commentCount;let s="评论("+this.recommendsCount+")";this.list=["歌曲列表",s,"收藏者"];const e=t.data.playlist.trackIds;this.length=e.length;for(let i=0,a=e.length;i<a;i++)Object(n["e"])(e[i].id).then(t=>{let s=new n["j"](t.data.songs);this.musicList.push(s)});this.getRecommends(),Object(n["f"])(this.id,30).then(t=>{this.subs=t.data.subscribers})},getRecommends(){Object(n["d"])(this.id,this.limit,this.offset).then(t=>{this.recommends=t.data.comments})}},watch:{$route(){this.$route.path.indexOf("musiclistdetail")>0&&this.getDetailRequestDate()}}},x=S,L=(e("9a1c"),Object(h["a"])(x,i,a,!1,null,"76711872",null));s["default"]=L.exports},"835c":function(t,s,e){"use strict";e("a70f")},"9a1c":function(t,s,e){"use strict";e("e8af")},a70f:function(t,s,e){},bbf8:function(t,s,e){},e8af:function(t,s,e){},f850:function(t,s,e){"use strict";e("bbf8")}}]);
//# sourceMappingURL=chunk-765efae1.859b54c8.js.map